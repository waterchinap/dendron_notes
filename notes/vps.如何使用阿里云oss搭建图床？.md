---
id: xs69i2mowpjnxr9mplxgkl9
title: 如何使用阿里云oss搭建图床？
desc: ''
updated: 1662565912905
created: 1662565912905
isDir: false
---
- > 本文假定你已经知道什么是 #OSS ，了解阿里云OSS的一些概念
  
  在阿里云创建bucket获取AccessKey SecretKey使用图床工具验证Typora 中配置图片自动上传
## **在阿里云创建bucket**

进入阿里云控制台，如果没有开通对象存储 ，需要先进行开通 （开通不收费，使用才收费）, 进入对象存储的配置中，选择 bucket列表 -> 创建Bucket ，配置调整如下：（读写权限 需要调整 公共读）


如果有自己的域名，可以通过绑定自己的域名访问
## **获取AccessKey SecretKey**

上传图片 需要这两个参数，建议使用RAM子账号，授权OSS，不建议使用主账号的，风险大

具体配置 ，


进入 AccessKey管理 。进入之后 ，会弹出一个对话框，选择开始使用子用户AccessKey，


创建子用户，选择 编程访问，点击确定，输入手机验证码验证身份


创建成功后，就会出现需要的信息，这里的信息只会显示一次，自己备份下来


返回到用户列表 ，找到刚才创建的子用户，给他添加一个OSS的权限


这里我们选择 FullAccess


至此，阿里云OSS这边的准备工作就完成了

**使用图床工具验证**

这里我使用的是 `uPic` ，其他工具同理


空间名称就填你前面创建的bucket的名称，AccessKey 和 SecretKey 就是我们上面创建子账户的对应信息，如果配置了自己的域名，在域名一项中填写，如 `http://example.com` ,填写完成后，点击验证，上传成功会自动复制访问url，到浏览器中验证一下。
## **Typora 中配置图片自动上传**

如果你也使用的是 `Typora` 作为 `Markdown` 编辑器，可以参考下面步骤配置图片自动上传到OSS中：

打开偏好设置 -\> 图像 ，更改 `插入图片时...` 选择上传图片 。下面的上传服务设定，选择你的图床工具软件，点击验证图片上传选项


出现下图就代表配置成功了！


---
以下是我的实践。

这篇文章只写了在ios上如何配置，我在linux上还是踩了很多坑，花了一晚上才弄好。
## 思路
没有备案的域名使用的是香港的bucket，不适合做图床，于是新建了一个附近内地的bucket。md文件中的所有图片都指向内地的图床。

 阿里云那边没什么难度，按以上教程做好就行。

 picgo很麻烦。
	- picgo-app很麻烦，不要用。
	- 使用picgo命令行，又有两种方式，一种是在typora里面下载。速度很慢，基本下不了，所以也不要用。
	- 按typora的文档说明，使用第三种方法。通过node把picgo安装好，在typora里面设置好命令路径。按照picgo的文档，设置好uploader
	- 最后，注意不要勾选typora里面一个“尽量使用相对路径的选项”，否则会出现图片上传成功，但会报错，错误大概是无法更新链接的情况。可能是和最后一项冲突。